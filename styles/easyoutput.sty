% easyoutput - LaTeX package
% (c)2006 Davide Cavalca <davide.cavalca@tiscali.it>
% This package is under the LaTeX Project Public License
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{easyoutput}[2006/10/01 Tweak LaTeX for PS or PDF output]

\RequirePackage{ifpdf}
\RequirePackage{ifthen}
\RequirePackage{classlist}

\ifpdf
	% Include le thumbnail delle pagine nel pdf (ma solo se non siamo in draft mode)
	\newcommand{\@loadthumbpdf}{\RequirePackage{thumbpdf}}
	\DeclareOption{draft}{\renewcommand{\@loadthumbpdf}{}}
\fi

\DeclareOption{bookmarksnumbered}{\PassOptionsToPackage{bookmarksnumbered=true}{hyperref}}
\DeclareOption{colorlinks}{\PassOptionsToPackage{colorlinks=true}{hyperref}}
\DeclareOption{italian}{\PassOptionsToPackage{pdflang=it}{hyperref}}

% if the book class is used pass special options to hyperref
%\ifthenelse{\equal{book}{book}}{\PassOptionsToPackage{plainpages=false,pdfpagelabels}{hyperref}}{}
%\DeclareOption{book}{\PassOptionsToPackage{plainpages=false,pdfpagelabels}{hyperref}}

\DeclareOption{final}{
	\PassOptionsToPackage{final=true}{hyperref}
	\PassOptionsToPackage{final}{microtype}
	\PassOptionsToPackage{final}{graphicx}
	% requires a run of pdfatfi.pl to include metadata
	\PassOptionsToPackage{final}{attachfile2}
}

\ProcessOptions\relax

\RequirePackage{color}
\ifpdf
	\RequirePackage{pdfcolmk}
\fi
\RequirePackage{xcolor}

% Sommario link e altre impostazioni
% Configurare con
% \hypersetup{
% 	pdfauthor={autore},
% 	pdftitle={titolo},
% 	pdfsubject={oggetto},
% 	pdfkeywords={keyword1, keyword2,...},
% 	pdfpagemode=FullScreen
%		colorlinks=true
% }
\RequirePackage[pdfprintscaling=None]{hyperref}
% \hypersetup{
%		pdfcopyright={},pdflicenseurl={}
% }
\RequirePackage{hyperxmp}
\ifpdf
	\RequirePackage{hypdestopt}
\fi
\RequirePackage{fixltx2e}

\ifpdf
	\@loadthumbpdf
	% attachment ai PDF
	\RequirePackage[timezone={+01'00'},print=false]{attachfile2}
	\RequirePackage{embedfile}
\fi

% Per usare immagini nel documento
\RequirePackage{graphicx}

% abilita alcune estensioni tipografiche che migliorano la resa con pdfLatex
\RequirePackage{microtype}

% Imposta titolo nelle proprietà del pdf con \title
\let\@oldtitle\title
\renewcommand{\title}[1]{
	\hypersetup{pdftitle={#1}}
	\@oldtitle{#1}
}

% Imposta autore nelle proprietà del pdf con \author
\let\@oldauthor\author
\renewcommand{\author}[1]{
	\hypersetup{pdfauthor={#1}}
	\ifpdf
		\attachfilesetup{author={#1}}
	\fi
	\@oldauthor{#1}
}

\newcommand{\printtitle}{\@title}
\newcommand{\printauthor}{\@author}
\newcommand{\subject}[1]{\hypersetup{pdfsubject={#1}}}
\newcommand{\pdfkeywords}[1]{\hypersetup{pdfkeywords={#1}}}
\newcommand{\pdfpagemode}[1]{\hypersetup{pdfpagemode=#1}}
